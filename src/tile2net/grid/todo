reminder about: https://shapely.readthedocs.io/en/latest/reference/shapely.remove_repeated_points.html

We can use something like the majority vote + confidence mask to force the labels of the pixels with low confidence into the same label as their neighbors starting from like 50 pixels away from the edge

add a changelog
we should have vecgrid.prediction and vecgrid.mask
we must dissolve before simplifying

stitch loader should still use threading within a process if a lot of small grid in the big tile


outdir not correctly being set


The user wants the end result
We should delete them by default and only keep it if explicitly passed


vecgrid.file.colored
vecgrid.padded.file.colored

previews are too slow

problem is, seggrid.broadcast.index implicates more tiles than just seggrid.index


seggrid.padded.infile

seggrid.broadcast.infile

filename hash based

pad 1:
/tmp/tile2net/bRs07FIb0QB5n-8b/polygons/preview/Polygons-b726f8e05209f926-9c1419be84668cbe356eb631f0807484.png

/tmp/tile2net/bRs07FIb0QB5n-8b/polygons/preview/Polygons-dc590f77e0b974b3-9c1419be84668cbe356eb631f0807484.png

/home/arstneio/PycharmProjects/tile2net/src/boston_common/polygons/Polygons-8053fc8b08c3be5c-9c1419be84668cbe356eb631f0807484.parquet


Out[1]: 'b5ad26eab3fb013e-9c1419be84668cbe356eb631f0807484'
pairs
Out[2]:
array([(158640, 193920), (158640, 193921), (158640, 193922),
       (158640, 193923), (158641, 193920), (158641, 193921),
       (158641, 193922), (158641, 193923), (158642, 193920),
       (158642, 193921), (158642, 193922), (158642, 193923),
       (158643, 193920), (158643, 193921), (158643, 193922),
       (158643, 193923), (158640, 193924), (158640, 193925),
       (158640, 193926), (158640, 193927), (158641, 193924),
       (158641, 193925), (158641, 193926), (158641, 193927),
       (158642, 193924), (158642, 193925), (158642, 193926),
       (158642, 193927), (158643, 193924), (158643, 193925),
       (158643, 193926), (158643, 193927), (158640, 193928),
       (158640, 193929), (158640, 193930), (158640, 193931),
       (158641, 193928), (158641, 193929), (158641, 193930),
       (158641, 193931), (158642, 193928), (158642, 193929),
       (158642, 193930), (158642, 193931), (158643, 193928),
       (158643, 193929), (158643, 193930), (158643, 193931),
       (158644, 193920), (158644, 193921), (158644, 193922),
       (158644, 193923), (158645, 193920), (158645, 193921),
       (158645, 193922), (158645, 193923), (158646, 193920),
       (158646, 193921), (158646, 193922), (158646, 193923),
       (158647, 193920), (158647, 193921), (158647, 193922),
       (158647, 193923), (158644, 193924), (158644, 193925),
       (158644, 193926), (158644, 193927), (158645, 193924),
       (158645, 193925), (158645, 193926), (158645, 193927),
       (158646, 193924), (158646, 193925), (158646, 193926),
       (158646, 193927), (158647, 193924), (158647, 193925),
       (158647, 193926), (158647, 193927), (158644, 193928),
       (158644, 193929), (158644, 193930), (158644, 193931),
       (158645, 193928), (158645, 193929), (158645, 193930),
       (158645, 193931), (158646, 193928), (158646, 193929),
       (158646, 193930), (158646, 193931), (158647, 193928),
       (158647, 193929), (158647, 193930), (158647, 193931),
       (158648, 193920), (158648, 193921), (158648, 193922),
       (158648, 193923), (158649, 193920), (158649, 193921),
       (158649, 193922), (158649, 193923), (158650, 193920),
       (158650, 193921), (158650, 193922), (158650, 193923),
       (158651, 193920), (158651, 193921), (158651, 193922),
       (158651, 193923), (158648, 193924), (158648, 193925),
       (158648, 193926), (158648, 193927), (158649, 193924),
       (158649, 193925), (158649, 193926), (158649, 193927),
       (158650, 193924), (158650, 193925), (158650, 193926),
       (158650, 193927), (158651, 193924), (158651, 193925),
       (158651, 193926), (158651, 193927), (158648, 193928),
       (158648, 193929), (158648, 193930), (158648, 193931),
       (158649, 193928), (158649, 193929), (158649, 193930),
       (158649, 193931), (158650, 193928), (158650, 193929),
       (158650, 193930), (158650, 193931), (158651, 193928),
       (158651, 193929), (158651, 193930), (158651, 193931),
       (158652, 193920), (158652, 193921), (158652, 193922),
       (158652, 193923), (158653, 193920), (158653, 193921),
       (158653, 193922), (158653, 193923), (158654, 193920),
       (158654, 193921), (158654, 193922), (158654, 193923),
       (158655, 193920), (158655, 193921), (158655, 193922),
       (158655, 193923), (158652, 193924), (158652, 193925),
       (158652, 193926), (158652, 193927), (158653, 193924),
       (158653, 193925), (158653, 193926), (158653, 193927),
       (158654, 193924), (158654, 193925), (158654, 193926),
       (158654, 193927), (158655, 193924), (158655, 193925),
       (158655, 193926), (158655, 193927), (158652, 193928),
       (158652, 193929), (158652, 193930), (158652, 193931),
       (158653, 193928), (158653, 193929), (158653, 193930),
       (158653, 193931), (158654, 193928), (158654, 193929),
       (158654, 193930), (158654, 193931), (158655, 193928),
       (158655, 193929), (158655, 193930), (158655, 193931)], dtype=object)
self.index
Out[3]:
MultiIndex([(158640, 193920),
            (158640, 193921),
            (158640, 193922),
            (158640, 193923),
            (158641, 193920),
            (158641, 193921),
            (158641, 193922),
            (158641, 193923),
            (158642, 193920),
            (158642, 193921),
            ...
            (158653, 193930),
            (158653, 193931),
            (158654, 193928),
            (158654, 193929),
            (158654, 193930),
            (158654, 193931),
            (158655, 193928),
            (158655, 193929),
            (158655, 193930),
            (158655, 193931)],
           names=['xtile', 'ytile'], length=192)



result
Out[2]: 'a850d58586cf86b2-9c1419be84668cbe356eb631f0807484'
pairs
Out[3]:
array([(158640, 193920), (158640, 193921), (158640, 193922),
       (158640, 193923), (158641, 193920), (158641, 193921),
       (158641, 193922), (158641, 193923), (158642, 193920),
       (158642, 193921), (158642, 193922), (158642, 193923),
       (158643, 193920), (158643, 193921), (158643, 193922),
       (158643, 193923), (158640, 193924), (158640, 193925),
       (158640, 193926), (158640, 193927), (158641, 193924),
       (158641, 193925), (158641, 193926), (158641, 193927),
       (158642, 193924), (158642, 193925), (158642, 193926),
       (158642, 193927), (158643, 193924), (158643, 193925),
       (158643, 193926), (158643, 193927), (158640, 193928),
       (158640, 193929), (158640, 193930), (158640, 193931),
       (158641, 193928), (158641, 193929), (158641, 193930),
       (158641, 193931), (158642, 193928), (158642, 193929),
       (158642, 193930), (158642, 193931), (158643, 193928),
       (158643, 193929), (158643, 193930), (158643, 193931),
       (158644, 193920), (158644, 193921), (158644, 193922),
       (158644, 193923), (158645, 193920), (158645, 193921),
       (158645, 193922), (158645, 193923), (158646, 193920),
       (158646, 193921), (158646, 193922), (158646, 193923),
       (158647, 193920), (158647, 193921), (158647, 193922),
       (158647, 193923), (158644, 193924), (158644, 193925),
       (158644, 193926), (158644, 193927), (158645, 193924),
       (158645, 193925), (158645, 193926), (158645, 193927),
       (158646, 193924), (158646, 193925), (158646, 193926),
       (158646, 193927), (158647, 193924), (158647, 193925),
       (158647, 193926), (158647, 193927), (158644, 193928),
       (158644, 193929), (158644, 193930), (158644, 193931),
       (158645, 193928), (158645, 193929), (158645, 193930),
       (158645, 193931), (158646, 193928), (158646, 193929),
       (158646, 193930), (158646, 193931), (158647, 193928),
       (158647, 193929), (158647, 193930), (158647, 193931),
       (158648, 193920), (158648, 193921), (158648, 193922),
       (158648, 193923), (158649, 193920), (158649, 193921),
       (158649, 193922), (158649, 193923), (158650, 193920),
       (158650, 193921), (158650, 193922), (158650, 193923),
       (158651, 193920), (158651, 193921), (158651, 193922),
       (158651, 193923), (158648, 193924), (158648, 193925),
       (158648, 193926), (158648, 193927), (158649, 193924),
       (158649, 193925), (158649, 193926), (158649, 193927),
       (158650, 193924), (158650, 193925), (158650, 193926),
       (158650, 193927), (158651, 193924), (158651, 193925),
       (158651, 193926), (158651, 193927), (158648, 193928),
       (158648, 193929), (158648, 193930), (158648, 193931),
       (158649, 193928), (158649, 193929), (158649, 193930),
       (158649, 193931), (158650, 193928), (158650, 193929),
       (158650, 193930), (158650, 193931), (158651, 193928),
       (158651, 193929), (158651, 193930), (158651, 193931),
       (158652, 193920), (158652, 193921), (158652, 193922),
       (158652, 193923), (158653, 193920), (158653, 193921),
       (158653, 193922), (158653, 193923), (158654, 193920),
       (158654, 193921), (158654, 193922), (158654, 193923),
       (158655, 193920), (158655, 193921), (158655, 193922),
       (158655, 193923), (158652, 193924), (158652, 193925),
       (158652, 193926), (158652, 193927), (158653, 193924),
       (158653, 193925), (158653, 193926), (158653, 193927),
       (158654, 193924), (158654, 193925), (158654, 193926),
       (158654, 193927), (158655, 193924), (158655, 193925),
       (158655, 193926), (158655, 193927), (158652, 193928),
       (158652, 193929), (158652, 193930), (158652, 193931),
       (158653, 193928), (158653, 193929), (158653, 193930),
       (158653, 193931), (158654, 193928), (158654, 193929),
       (158654, 193930), (158654, 193931), (158655, 193928),
       (158655, 193929), (158655, 193930), (158655, 193931)], dtype=object)
self.index
Out[4]:
MultiIndex([(158640, 193920),
            (158640, 193921),
            (158640, 193922),
            (158640, 193923),
            (158641, 193920),
            (158641, 193921),
            (158641, 193922),
            (158641, 193923),
            (158642, 193920),
            (158642, 193921),
            ...
            (158653, 193930),
            (158653, 193931),
            (158654, 193928),
            (158654, 193929),
            (158654, 193930),
            (158654, 193931),
            (158655, 193928),
            (158655, 193929),
            (158655, 193930),
            (158655, 193931)],
           names=['xtile', 'ytile'], length=192)